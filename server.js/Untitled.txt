import express from 'express';
import cors from 'cors';
import helmet from 'helmet';
import rateLimit from 'express-rate-limit';
import bcrypt from 'bcrypt';
import jwt from 'jsonwebtoken';
import xss from 'xss';
import { pool } from './db.js';

const app = express();
app.use(helmet());
app.use(cors());
app.use(express.json({ limit: '1mb' }));

const JWT_SECRET = process.env.JWT_SECRET || 'change_me';

// test route
app.get('/', (_req,res)=>res.send('API OK'));

// TODO: add the auth, users, reviews, moderation routes here
// (I already gave you the longer version â€” for now you can start with this)

const PORT = process.env.PORT || 4000;
app.listen(PORT, () => console.log('API on :' + PORT));
